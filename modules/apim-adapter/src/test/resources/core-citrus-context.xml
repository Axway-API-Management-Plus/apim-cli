<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:citrus="http://www.citrusframework.org/schema/config"
       xmlns:citrus-http="http://www.citrusframework.org/schema/http/config"
       xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
	http://www.citrusframework.org/schema/config http://www.citrusframework.org/schema/config/citrus-config.xsd
	http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd
	http://www.citrusframework.org/schema/http/config
	http://www.citrusframework.org/schema/http/config/citrus-http-config.xsd">

    <citrus:schema-repository id="schemaRepository"/>

    <bean id="propertyPlaceholder" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="locations">
            <list>
                <value>citrus-global-variables.properties</value>
            </list>
        </property>
        <property name="placeholderPrefix" value="${"/>
    </bean>

    <bean id="CoreBeforeSuite" class="com.axway.lib.CoreInitializationTestIT"/>

    <citrus:global-variables>
        <citrus:variable name="apiManagerHost" value="${apiManagerHost}"/>
        <citrus:variable name="apiManagerUser" value="${apiManagerUser}"/>
        <citrus:variable name="apiManagerPass" value="${apiManagerPass}"/>
        <citrus:variable name="API_VERSION" value="/api/portal/v1.4"/>
    </citrus:global-variables>

    <bean id="httpClientAllowAllHosts" class="com.axway.lib.HttpClientAllowAllHosts"/>

    <citrus-http:client id="apiManager"
                        request-url="https://${apiManagerHost}:${apiManagerPort}/api/portal/v1.4"
                        request-method="GET"
                        content-type="application/json"
                        charset="UTF-8"
                        timeout="60000"
                        interceptors="clientInterceptors"
                        request-factory="sslRequestFactory"
                        />
    <bean id="httpClient" factory-bean="httpClientAllowAllHosts" factory-method="httpClient"/>

    <bean id="sslRequestFactory" factory-bean="httpClientAllowAllHosts" factory-method="sslRequestFactory"/>

    <util:list id="clientInterceptors">
        <bean class="com.consol.citrus.http.interceptor.LoggingClientInterceptor"/>
        <bean class="com.axway.lib.BasicAuthInterceptor"/>
    </util:list>
</beans>